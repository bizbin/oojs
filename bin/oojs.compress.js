!function(){var e={name:"oojs",namespace:"",basePath:"./",$oojs:function(){if(Function.prototype.proxy=function(){var e=this,t=Array.prototype.slice.apply(arguments),n=t.shift();return function(){var s=Array.prototype.slice.apply(arguments);return e.apply(n,s.concat(t))}},"undefined"!=typeof define&&define instanceof Array)var t=define;if("undefined"!=typeof window)this.global=window,this.runtime="browser",this.basePath="http://cpro.baidustatic.cn/js/",this.version="1.0.0",this.global.oojs=e,this.global.define=this.define.proxy(this);else if(global){this.basePath=__dirname+"\\",this.global=global,this.runtime="nodejs",global.oojs=e,global.define=this.define.proxy(this);var n=module.constructor,s=n.wrap;n.wrap=function(e){return e=e.replace(/define\s*&&\s*define\s*\(/gi,"define(module,"),s(e)},module.exports=this}if(t&&t.length)for(var i,a=0,r=t.length;r>a;a++)i=t[a],define("undefined"!=typeof module?module:i)},buildInObject:{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object Window]":1},clone:function(e,t){var n,s,i=e;if(t="undefined"==typeof t?0:t--,!e||e instanceof Number||e instanceof String||e instanceof Boolean||0===t)return i;if(e instanceof Array){i=[];var a=0;for(n=0,s=e.length;s>n;n++)i[a++]=this.clone(e[n])}else if("object"==typeof e){if(this.buildInObject[Object.prototype.toString.call(e)])return i;i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=this.clone(e[n]))}return i},create:function(e){var t=Array.prototype.slice.call(arguments,0);t.shift();var n=e.name||"init",s=function(e){this[n]=this[n]||function(){},this[n].apply(this,e),"browser"===this.runtime&&(window.addEventListener?window.addEventListener("unload",this.dispose,!1):window.attachEvent&&window.attachEvent("onunload",this.dispose))};s.prototype=e;var i=new s(t);for(var a in e)i[a]&&e[a]&&e.hasOwnProperty(a)&&"object"==typeof i[a]&&(i[a]=this.clone(i[a],1));return i.instances=null,e.instances=e.instances||[],e.instances.push(i),i},define:function(e,t){t||(t=e);var n=t.name;t.namespace=t.namespace||"",t.dispose=t.dispose||function(){};var s=t.namespace.split("."),i="nodejs";"undefined"!=typeof window&&(global=window,i="browser");for(var a,r=s.length,o=global,l=0;r>l;l++)a=s[l],a&&(o[a]=o[a]||{},o=o[a]);if(o[n]=o[n]||{},o[n].name&&o[n].___registered){if(o[n].___registered&&t.classType&&"extend"===t.classType){for(var c in t)c&&t.hasOwnProperty(c)&&(o[n][c]=t[c]);t=o[n]}}else t.___registered=!0,o[n]=t;if(this.loadDeps&&t&&t.deps)this.loadDeps(t);else{var f="$"+n;t[f]&&t[f]()}e&&(e.exports=t)},find:function(e){var t,n=e.split(".");t=this.global[n[0]];for(var s=1,i=n.length;i>s;s++){if(!t||!t[n[s]]){t=null;break}t=t[n[s]]}return t},using:function(e){var t=this.find(e);return t||"nodejs"===this.runtime&&(require(this.getClassPath(e)),t=this.find(e)),t},getClassPath:function(e){return this.basePath+e.replace(/\./gi,"/")+".js"},config:function(e){this.basePath=e.basePath||this.basePath}};e.define("undefined"!=typeof module?module:null,e)}(),define&&define({name:"event",namespace:"oojs",eventList:{},groupList:{},eventGroupIndexer:{},$event:function(){},bind:function(e,t){var n=this.eventList[e]=this.eventList[e]||{};return(n.callbacks=n.callbacks||[]).push(t),n.status=!1,this},removeListener:function(e,t){if(this.eventList[e]){var n=this.eventList[e];if(n.callbacks&&n.callbacks.length)for(var s=0,i=n.callbacks.length;i>s;s++)if(t){if(t===n.callbacks[s]){n.callbacks[s]=null;break}}else n.callbacks[s]=null}},unbind:function(e,t){if(e||t)this.removeListener(e,t);else{var n;for(n in this.eventList)n&&this.eventList[n]&&this.eventList.hasOwnProperty(n)&&this.removeListener(n)}},emit:function(e,t){var n=this.eventList[e];if(n&&n.callbacks&&n.callbacks.length){var s=n.callbacks.length;n.data=[];for(var i=0;s>i;i++){var a=n.callbacks[i];a&&n.data.push(a(t))}n.callbacks=null,n.status=!0}for(var r,o=this.eventGroupIndexer[e]||[],i=0,l=o.length;l>i;i++)r=o[i],r&&this.groupEmit(r)},group:function(e,t,n){this.groupList[e]=this.groupList[e]||{};var s=this.groupList[e],i=s.events=s.events||{};n&&(s.callbacks=s.callbacks||[]).push(n);for(var a,t=t||[],r=0,o=t.length;o>r;r++)a=t[r],i[a]=1,(this.eventGroupIndexer[a]=this.eventGroupIndexer[a]||[]).push(e)},groupEmit:function(e){var t=this.groupList[e];if(t){var n,s,i=t.events=t.events||{},a=!0,r={};for(n in i)if(n&&i.hasOwnProperty(n)){if(s=this.eventList[n],!s||!s.status){a=!1,r=null;break}r[n]=s.data}if(n=null,a){for(var o,l=t.callbacks,c=l.length||0,f=0;c>f;f++)o=t.callbacks[f],o&&(o(r),t.callbacks[f]=null);o=null,t.callbacks=null;for(var u,h=t.afters=t.afters||[],c=h.length||0,f=0;c>f;f++)u=h[f],u&&(u(r),h[f]=null);u=null,t.afters=null}}},afterGroup:function(e,t){var n=this.groupList[e]=this.groupList[e]||{},s=n.afters=n.afters||[];s.push(t)}}),define&&define({name:"oojs",namespace:"",classType:"extend",$oojs:function(){this.ev=oojs.using("oojs.event")},loadScript:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onerror=n.onreadystatechange=function(){/loaded|complete|undefined/.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,n=void 0,t())}.proxy(this);var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)},loadDeps:function(e){var t=e.deps;if("nodejs"===this.runtime){var t=e.deps;for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=require(this.getClassPath(t[n])));var s="$"+e.name;e[s]&&e[s]()}else if(t){for(var n in t)if(n&&t.hasOwnProperty(n)){var i=t[n];this.ev.bind(i,function(){return oojs.using(i)}),this.ev.group("loadDeps",[i],function(t){e[n]=t[i][0]}),this.ev.afterGroup("loadDeps",function(){var t="$"+e.name;e[t]&&e[t]()});var a=this.basePath+i.replace(/\./gi,"/")+".js",r=function(){this.ev.emit(i)}.proxy(this);this.loadScript(a,r)}}else e[s]&&e[s]()}});